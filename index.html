<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cyclocross UCI | MEDDOUR Noa</title>
<style>
:root { --uci-red:#e10600; --dark:#111; --light:#f5f5f5; }
body { margin:0; font-family:Arial,sans-serif; background:var(--light); color:#222; line-height:1.6; transition: background 0.5s, color 0.5s;}
header { color:white; padding:5rem 2rem; text-align:center; background-size:cover; background-position:center; transition: background 1s;}
nav { position:sticky; top:0; z-index:1000; background:var(--uci-red); display:flex; justify-content:center; gap:2rem; padding:1rem; }
nav a { color:white; text-decoration:none; font-weight:bold; }
nav a:hover { text-decoration:underline; }
main { max-width:1200px; margin:auto; padding:3rem 2rem; }
section { margin-bottom:4rem; background:white; padding:2.5rem; border-radius:14px; box-shadow:0 10px 25px rgba(0,0,0,0.1); }
h2 { color:var(--uci-red); margin-top:0; font-size:2rem; }
.grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(260px,1fr)); gap:2rem; }
.card { background:#fafafa; padding:2rem; border-radius:12px; border-top:6px solid var(--uci-red); }
.card h3 { margin-top:0; }
table { width:100%; border-collapse:collapse; }
table th, table td { padding:1rem; border-bottom:1px solid #ddd; text-align:left; }
table th { background:#f0f0f0; }
footer { background:var(--dark); color:white; text-align:center; padding:2rem 1rem; }
footer p { margin:0.3rem 0; }
form label { display:block; }
input, textarea, button { width:100%; max-width:520px; padding:0.7rem; margin-top:0.3rem; border-radius:6px; border:1px solid #ccc; font-family:inherit; }
button { background:var(--uci-red); color:#fff; border:none; cursor:pointer; margin-top:0.8rem; }
button:hover { opacity:0.9; }
body.dark { background:#0f0f0f; color:#eaeaea; }
body.dark section { background:#1a1a1a; }
body.dark nav { background:#8b0000; }
body.dark .card { background:#222; }
</style>
</head>
<body>

<header id="header">
  <h1>Cyclocross UCI</h1>
  <p>Site personnel de MEDDOUR Noa dÃ©diÃ© au cyclocross UCI</p>
</header>

<nav>
  <a href="#presentation">PrÃ©sentation</a>
  <a href="#calendrier">Calendrier</a>
  <a href="#classements">Classements</a>
  <a href="#coureurs">Coureurs</a>
  <a href="#actus">ActualitÃ©s</a>
  <a href="#contact">Contact</a>
  <button id="toggleTheme">ðŸŒ™</button>
</nav>

<main>
<section id="presentation">
<h2>Quâ€™est-ce que le cyclocross UCI ?</h2>
<p>Discipline du cyclisme reconnue par lâ€™UCI, circuits courts et techniques.</p>
</section>

<section id="calendrier">
<h2>Calendrier des compÃ©titions</h2>
<div class="grid" id="calendar">
  <div class="card"><h3>Coupe du Monde UCI</h3><p>SÃ©rie de manches internationales.</p></div>
  <div class="card"><h3>Championnats dâ€™Europe</h3><p>Ã‰preuve annuelle.</p></div>
  <div class="card"><h3>Championnats du Monde</h3><p>Maillot arc-en-ciel.</p></div>
</div>
</section>

<section id="classements">
<h2>Classements UCI</h2>
<table id="uciTable">
<thead><tr><th>Rang</th><th>Nom</th><th>Pays</th><th>CatÃ©gorie</th></tr></thead>
<tbody><tr><td colspan="4">Chargementâ€¦</td></tr></tbody>
</table>
</section>

<section id="actus">
<h2>ActualitÃ©s du cyclocross</h2>
<div id="news" class="grid"><p>Chargementâ€¦</p></div>
</section>

<section id="contact">
<h2>Contact</h2>
<form action="https://formspree.io/f/TON_FORMSPREE_ID" method="POST">
<label>Nom<br><input type="text" name="name" required></label>
<label>Email<br><input type="email" name="email" required></label>
<label>Message<br><textarea name="message" rows="5" required></textarea></label>
<button type="submit">Envoyer</button>
</form>
<p><strong>Nombre de vues :</strong> <span id="views">Chargement...</span></p>
</section>
</main>

<footer>
<p>Â© 2025 â€“ Cyclocross UCI</p>
<p>CrÃ©Ã© par MEDDOUR Noa</p>
</footer>

<script>
// ---------- Dark Mode ----------
const btn=document.getElementById('toggleTheme');
if(btn){
  btn.onclick=()=>{document.body.classList.toggle('dark'); localStorage.setItem('theme',document.body.classList.contains('dark')?'dark':'light');};
  if(localStorage.getItem('theme')==='dark') document.body.classList.add('dark');
}

// ---------- Background alÃ©atoire ----------
const backgrounds=[
"https://images.unsplash.com/photo-1578843530865-05cd1a79ef7b",
"https://images.unsplash.com/photo-1609079875705-7d826fd91512",
"https://images.unsplash.com/photo-1605069006320-49f0fbd1eaae",
"https://images.unsplash.com/photo-1573250286325-12b6e7c6f2c4",
"https://images.unsplash.com/photo-1573250286330-8e6a291d0ad1",
"https://images.unsplash.com/photo-1609008901531-9b85e62db09e",
"https://images.unsplash.com/photo-1609008901543-0b04128fc104",
"https://images.unsplash.com/photo-1609008901555-12a0b5f786cf",
"https://images.unsplash.com/photo-1609008901568-5b7b13dfdc1a",
"https://images.unsplash.com/photo-1609008901579-5c10d0b8cfae"
];
const header=document.getElementById('header');
function changeBackground(){ header.style.backgroundImage=`url(${backgrounds[Math.floor(Math.random()*backgrounds.length)]})`; }
changeBackground(); setInterval(changeBackground,60000);

// ---------- Compteur de vues simple ----------
(function(){
  const el=document.getElementById('views'); if(!el) return;
  let key='cyclocross-site';
  let val=parseInt(localStorage.getItem(key)||0); val++; el.textContent=val; localStorage.setItem(key,val);
})();

// ---------- Classements UCI via Google Sheet ----------
(async function(){
  const sheetId="TON_GOOGLE_SHEET_ID";
  const url=`https://spreadsheets.google.com/feeds/list/${sheetId}/od6/public/values?alt=json`;
  try{
    const res=await fetch(url);
    const data=await res.json();
    const entries=data.feed.entry;
    const tbody=document.querySelector('#uciTable tbody');
    tbody.innerHTML='';
    entries.forEach(e=>{
      const rang=e.gsx$rang.$t, nom=e.gsx$nom.$t, pays=e.gsx$pays.$t, cat=e.gsx$categorie.$t;
      const tr=document.createElement('tr');
      tr.innerHTML=`<td>${rang}</td><td>${nom}</td><td>${pays}</td><td>${cat}</td>`;
      tbody.appendChild(tr);
    });
  }catch(err){ console.error(err); document.querySelector('#uciTable tbody').innerHTML='<tr><td colspan="4">Erreur chargement</td></tr>'; }
})();

// ---------- ActualitÃ©s RSS cyclocross (1 min) ----------
(function(){
  const cacheTime=60000; const proxy='https://api.allorigins.win/get?url='; const rss='https://www.cxmagazine.com/feed/';
  async function loadNews(){
    try{
      const r=await fetch(proxy+encodeURIComponent(rss));
      const d=await r.json();
      const parser=new DOMParser(); const xml=parser.parseFromString(d.contents,'text/xml');
      const items=Array.from(xml.querySelectorAll('item')).slice(0,5);
      const container=document.getElementById('news'); container.innerHTML='';
      items.forEach(i=>{
        const div=document.createElement('div'); div.className='card';
        div.innerHTML=`<h3>${i.querySelector('title')?.textContent}</h3>
        <p>${i.querySelector('description')?.textContent.substring(0,120)}...</p>
        <a href="${i.querySelector('link')?.textContent}" target="_blank">Lire</a>`;
        container.appendChild(div);
      });
    }catch(e){ document.getElementById('news').innerHTML='<p>Impossible de charger les actualitÃ©s.</p>'; console.error(e);}
  }
  loadNews(); setInterval(loadNews,cacheTime);
})();
</script>

</body>
</html>
